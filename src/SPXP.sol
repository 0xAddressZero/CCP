// SPDX-License-Identifier: UNLICENSED
pragma solidity 0.8.28;

//                                                     %%%%
//                                                    %%%%@
//                                                    @@%=-:
//                                          =--::    #@@%@@@@#.
//                                     +++===--:::::-+#@%*+===-::
//                             %%   +++*++=---:::::::-=*##=-..::--
//                             %%% +++***++==--::-:::----##=-:::---
//                              #%++++**++=----::::----::-##-=:::--
//                           @@@#+++++++===--:::::..::=+*:=%+=-:----
//                        @@@@@%+==++==----::.::..:..::=%=:*#--:--=-
//                        @@@@*=-=++++=--::::.....:::::#+*-=%+=:--==
//                         @  *+-=++++=---::::...::::::====*%#=---==
//                            **-+===+=--------:::::::::---=*%------
//                             #===+++==-==-=--==--::.:::==-:#--:::-
//                             **=-+++=========*%#*-:..::-=--=-:::.:
//                              *=-=+++++=----+++=-:...::::--==::..:
//                               +-==+#%%+--::--::::...:::== %#::...
//                               ++-==+==----:::::::..:::-= @@#-:...:
//                               *+=-=:------:.::::::::---   @#-:....
//                                 +---::---==-::-:::::-==+  +*-:....:
//                               * ==-=+-:--=++=-::::-=*++#  ==#*+=::::
//                               * ++==+*=-------::::+##+=*%  =%*=+:.:::
//                               **++==*+*+ :------:::..:::=#  *+-:::::::
//                              **++====**+* --==--::.......-=  ==-:::::--
//                              *++=====+%% ---==-::.....:..:=   +=--:::---
//                             +++======+#%-------::.....:::.=    +==--::----
//                            *++=====++++--------:::....::::-=    +==------=-
//                           +=======+++=---::----:::....::::=*     ++==-----=-
//                          +===--==++=-----::-----::::.::---##      ++===------
//                         +==---==++--=:-+++---==+++#####*-*#*        ++===--=-==
//                       *===--==++-:--==+%@@%*#%%#==%%%%###%*-%        ++===----==
//                     +=======++:::--==+%@@@@@%@@%+*@@@%%#%*-:%         +++==-----=
//                   +=======++::::---=+%@@@@@@%@@%*%@@@@%#*-::            +===-----=
//                 ++=++++++# #:::--==+%@@@@@@@@@@%#@@@@%%#*--:              ===-----=
//               ++=+++++** ## ::-====#@@@@@@@@@@@%%@@@@%%#*--::               ==-----=
//            ++++++++***##    :+##%%%@@@@@@@@@@%@%@@@@@@%#*=-=*%               +=------
//           ++++++++***#      %%@@@@@@@@@@@@@@@@%@@@@@@@%%#+-%%# :.::.         + ==-----
//          +++++++****        %%##*@@@@@@@@@@@@@@@@@@@@@%%#**%#+=+*###          + +=-----
//         *++++++ **          *---#@@@@@@@@@@@@@@@@@@@@@%%##%#+%%%%%##           + +=----:
//        **+++++ **           =::*%@@@@@@@@@@@@@@%@@@@@@%%#%*#%%%%%%%##             +=---::
//       **+++++ **            :=*%@@@@@@@@@@@@@@@@@@@@@@%%###%%%%%%%%%#               =---:
//      ** ++++ **            .-#%@@@@@@@@@@@@@@@@@@@@@@%%%#%%%%@@%%%%%#                =--::
//        *+++                :#%@@@@@@@@@@@@@@@@@@@@@@@%%%#%%%%%@@%%%%%##               ---::
//        ++++                #%%@@@@@@@@@@@@@@@@@@@%@@%%%%#%%%%%%@@%%%%%##               ---:
//        +++                %%%@@@@@@@@@@@@@@@@@@@@%%%%%%##%%%%%@@%%%%%%%#                -=::
//        +++               %@%@@@@@@@@@@@@@@@@%@@@@%%%%%%#%%#%@@@@@%%%%##*+               ---:
//        +++             %%%@@@@@@@@@@@@@@@@%%%%@@@%%%%%%%%%%%#%%%%#*=-:::::               --::
//        **+            *%@@@@@@@@@@@@@@@@@%%%%%%@@@%%%%%%%%%%*++===+++:-                  --::
//         ++          **%@@@@@@@@@@@@@@@@@@@**#@%@@@@@@@@%%%%%%%++#%%%#                     --:
//         +**        *=@@@@@@@@@@@@@@@@@@@@@%*=#%@@@%@@@@@@@@%%%%%+=+**=                    ---
//          **       =#@@@@@@@@@@@@@@@@@@@@@@@%-==%@@@%@@@@@@%%%%%%%%%%%%                    ---
//           *      *#@@@@@@@@@@@@@@@@@@@@@@@@@#--+@@@@@@@@@@%%%%%%%%%#*##                   ---
//                *=#@@@@@@@@@@@@@@@@@@@@@@@@@@%=-=%@@@@@@@@@%%%%%%*%%##*#                   ---
//               #=%%@@@@@@@@@@@@@@@@@@@@@@@@@@@++-%@@@@@@@@@@@%%%%#+*******+****##**        ===
//              ++@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%=*-@@@@@@@@@@@@@%%%%%%#+*#######             ===
//             #=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=+=%@@@@@@@@@@@@@%%%%%%%%*++=+*###           ==
//            *=#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@++=@@@@@@@@@@@@%%%%%%##%%%%###::--=         ==
//            *=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%==+@@@@@@@@@@@%%%%%##*+=%%####*  :          +
//           #=%@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@@@+=#@@@@@@@@@@@%%##*+-:::-===-===*
//          #-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@==#@@@%%%%%##*+-:::::.........::--
//          +=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@==#%@@+==-==-=-:.............:::::-.
//         %#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#=+%%@+---:-----:........::.:..:::::::
//      @@@%%*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*+%%%---::-:---:........:::::..:::.::
//      %@@%#=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#%%***-------::.:.::...:=*--::....::
//      %%%#=+*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%*#%%@@%*------::-=-=*=-:::+=--::::::
//     @@%%=-==#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*=%+%@@%%*++=*%#*%%%%%%+=--:==-:::::
//    @@%%*---===*@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+==-+#==#%@@%@@@@@@@%%%%+---------::::
//     %:=-------==+*%@@@@@@@@@@@@@@@@@@@@@%#+=-----+--:-=+%%@@@@@@#+-:--=-:-**--::
//      :---=++==++=+=+**#%@@@@@@@@@@@@%#*+===-:--:::::::::.:=*#%%%%*--===-------:
//      :::-===--=======-====+++****++====-==------::::::::::::::-+*%%#---------:-
//     ..::-------==-----------==--======-:-::--::::::..::..........:+#%::------:-
//     ..::--======----=----------:-----::::::::.......................:
//     :::-===+++=++++++=++++==++++++++======-=--:---:::::::::::::........
//    :::::-=-==-==-===---===-==========-=-==---::::.......................
//   ...:.::-:==:------::---------------------:::.............:.............
//   :.:::::::--:-----::::----------=--------------:::::::::::::.........:...
//     ...:.::::::-:::-:::---::::::::-----====----:::::::::::....:......:-:...
//      ::::------=====+=--======-::-::::::-::::::..:--::::-=+===------::.....
//           ============+******###########%####++++++=====++*+===------::....
//                    +=++%%@@%%@%@%%@@@@@@@@@@%####++======+++===-:-----:::
//                        %#%%%#%%@%%%%%%######*@@@%=+=-----==+====------:-
//                         -====+++++++=====++**%%%#++==----=========---::
//                         :-========+++++++*#%%***+===----=========
//                         ##%%%%%%#%%@@@@@@@@@%***#  ============
//                          %%%%%@%%%@@@@@@@%%%#%@@@
//                          =+***####****+=-=+**@@@%
//                           ----------::::::-=+*###
//                           :--------:::::.:::-+***
//                            --------::::::..::=+**
//                            ---------::::....:=+**
//                            ---------::::....:-+**
//                            :--------:::::...::+***
//                             :--------:::::..::+++*+
//                             :----=---:::::....:-=++*%
//                              :--------::::....::-+*###
//                               :---=----::::--=+*%%###+-.
//                               :---====++*#%####%%%#+::....
//                                --=#%@@@@@%%##***#=--::.....
//                                #%@@@@@@@#*=-:...-----:::....
//                                %%@%#*+=-::......:-----::-=+##
//                                %+====---::......:-=+**#%%######
//                                %#+==---::::.....:%%%%%%%%%%#*###
//                                %%@%%*+=---:::::=#%%%%%%#*===*####
//                                 *%@@@@@@@%%%%#####*+====+#%%%%#%# **
//                                 :-+#%@@@@@@@%%%%#*===+#%@@@%%%%%#*##*
//                                %----==++******+*%#*#%@@@@@@@@%%%##*#*
//                                %%***++++++***#%%%#@@@@@@@@%%%@%%%##%
//                               %%%@@@@@@@@@@@%%%%%%@@@@@@%@@@@%%%%%%%
//                               @%%@@@@@@@@@@@@@@%%#%@@@@@@@@%@@@@%%%#%
//                                @%%%%%%%%@@#%%%####%@@@@@@@@@@@@%%%%##% ***
//                                *%%%#%%@%%@#-%%####  @@@@@@@@@@@@@%%%###%#**
//                                + %%%%%%%%@#+#%%%%%   @@@@@@@@@@@@%%%###%%*
//                                  %@@@@@@@@@@@@@@%%    @@@@@@@@@@%%%%%###
//                                  #%@@@@@@@@@@@@%#       @@@@@@@@@%%%%%%%%
//                                  %%%@@@@@@@@@@@%%        %@@@@@%%%%%%%%%%
//                                  %%%@%%%%%@@@%%##        @@@%@@@@@%%%%%%%#
//                                   %%%#%%@%%%+*%##         %%@@@@@@%%%%%%%%#@***
//                                   #%%#%%@%%%*=###           @@@@@@@%%%%%%%%#@%**
//                                   %%@@@@@%@@%%%%%            %@@@@@@@%%%%%%%#@#*
//                                   %%@@@@@@@@@@@%#             @@@@@@%%%%%%%%%%%
//                                    %%@@@@@@@@@%#*              %%%@@@%%%%%%%%%%###
//                                    %@@@@@@@@@@%##              %%%%%%%%@@%%%%%%%%###
//                                    %%@%%@@%@@%%##               %%%%%%%%%%%%%%%%#####
//                                    %%%%%%@%@@+*%#*               %%%%%%%%%%%%%%%%#####
//                                    %%%%%%@%%@*-**#               %%%%%%%%%%%%%%%%%%####
//                                  %%%@@@@@@%@@%%%%##             %%%%%%%%%%%%%%%%%%%%####
//                         %%%%%%%%%%%@@@@@@@@@@@%%%##             %%%%%%%%%%%%%%##%%%%%#####
//                       %%%%%%%%%%##%%@@@@@@@@@@%%%###            %%%%%%%%%%%%%%%%##%%%%%####
//                      %%%@@@@@@@%##%%%@@@@@@@@@%%%###         %%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%
//                      %%@@@@@@@@%@@%#%@@@@@@@@@%%##**       %%%@@@@@@@@%%%%%%%%%%%%%#%%%%%%%
//                     #%@@@@@@@@@@@#%%@#%%%%%%%%%#####       %%@@%%%%%@@%%%%%%%%%%%%%%%%%%%
//                      #%%%@@@@@@@@@%##+#%%%%%%%%#####       #%%%%%%%%%%%%%%#%%%%%%%%%%%
//                      %%@@@%%%@%%%%%%##%%%%%%%%%####%       #%%%%%%%%%%%%%##%%%%%%%
//                      #%%@@@%%%%%%%%%%@@%%%#%%%%####         %%%%%%%%%%%##%%%%%%%%%
//                      #%%%%%%%%%%%%%%%%%%%%#%%%%####         %%%%%%%%#%%%%%%%%%%%%
//                       %%%%%%%%%%%%%%%%%%%%%%%%%%###          %%##%%%%%%%%%%#%%
//                        %@@@@@@%%%%%%%%% %%%%%%%####           %%%%%%%%%%%%%
//                              @@%        %%%%%%%%##%              %%%

contract SPXP {
    string public constant name = "SPX6900 Points";
    string public constant symbol = "SPXP";
    uint8 public constant decimals = 18;

    uint public constant MAX_SUPPLY = 69_000_000 ether;

    mapping(uint user_id => uint balance) public balanceOf;
    mapping(address account => bool allowed) public allowedTransfer;

    uint public totalSupply;
    address public owner;

    constructor(address _owner, uint _owner_user_id) {
        balanceOf[_owner_user_id] += MAX_SUPPLY;
        totalSupply += MAX_SUPPLY;
        owner = _owner;

        emit OwnershipTransferred(address(0), _owner);
        emit Transfer(0, _owner_user_id, MAX_SUPPLY);
    }

    function transfer(
        uint from_user_id,
        uint to_user_id,
        uint amount
    ) external onlyAllowedTransfer {
        balanceOf[from_user_id] -= amount;

        unchecked {
            balanceOf[to_user_id] += amount;
        }

        emit Transfer(from_user_id, to_user_id, amount);
    }

    function setTransferAllowed(
        address account,
        bool allowed
    ) external onlyOwner {
        allowedTransfer[account] = allowed;
        emit TransferAllowed(account, allowed);
    }

    function transferOwnership(address newOwner) public virtual onlyOwner {
        owner = newOwner;
        emit OwnershipTransferred(msg.sender, newOwner);
    }

    modifier onlyOwner() virtual {
        require(msg.sender == owner, Unauthorized());
        _;
    }

    modifier onlyAllowedTransfer() {
        require(
            allowedTransfer[msg.sender] || msg.sender == owner,
            Unauthorized()
        );
        _;
    }

    event OwnershipTransferred(address indexed user, address indexed newOwner);
    event Transfer(
        uint indexed from_user_id,
        uint indexed to_user_id,
        uint amount
    );
    event TransferAllowed(address indexed account, bool allowed);
    error Unauthorized();
}
